<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DK45686 eMD examples User Guide: edmp_wearable</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="TDK_theme.css" rel="stylesheet" type="text/css"/>
<link href="TDK_override_banner_color.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="TDK_Logo_white.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DK45686 eMD examples User Guide
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">Documentation of the DK45686 eMD examples</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00053.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">edmp_wearable </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This application demonstrates how to configure and use wearable features.</p>
<p>It enables accel in Low-Power mode at 50Hz.</p>
<p>It loads extended features RAM image, handling B2S (Bring to See), and starts eDMP to detect B2S and reverse B2S events through INT1. Power save mode can be selected and works in addition with Wake On Motion (WOM) to wake up eDMP only when motion is detected.</p>
<h1><a class="anchor" id="autotoc_md58"></a>
Command interface</h1>
<p>This application allows the following command to be sent through UART:</p><ul>
<li><code>o</code>: to enable/disable Power save mode (defaults to disable).</li>
<li><code>c</code>: to print current configuration.</li>
<li><code>h</code>: to print help screen.</li>
</ul>
<h1><a class="anchor" id="autotoc_md59"></a>
Limitations</h1>
<p>The B2S is an embedded feature running in the eDMP. The host must load a custom eDMP image to enable this feature.</p>
<p>The custom image loaded into eDMP will replace all other eDMP features. Therefore, running B2S will prevent usage of the following features:</p><ul>
<li>Pedometer</li>
<li>Tilt</li>
<li>Tap</li>
<li>SMD</li>
<li>RaiseToWake</li>
<li>FreeFall</li>
<li>LowG</li>
<li>HighG</li>
<li>Selftest</li>
</ul>
<h1><a class="anchor" id="autotoc_md60"></a>
Terminal output</h1>
<h2><a class="anchor" id="autotoc_md61"></a>
Data format</h2>
<p>Data are printed on the terminal as follow:</p>
<h3><a class="anchor" id="autotoc_md62"></a>
B2S event</h3>
<div class="fragment"><div class="line">&lt;timestamp&gt; us B2S</div>
<div class="line">&lt;timestamp&gt; us B2S REVERSE</div>
</div><!-- fragment --><p>With:</p><ul>
<li><code>&lt;timestamp&gt;</code>: Time in microsecond read from MCU clock when latest INT1 was fired.</li>
</ul>
<p><code>B2S</code> gesture is detected when doing a positive rotation around X axis. <code>Reversed B2S</code> gesture is detected when doing a negative rotation around X axis. When the device is going back to its original position (from <code>B2S</code> or <code>Reversed B2S</code>), another <code>B2S</code> event is generated.</p>
<p>Considering a watch form factor, a <code>B2S</code> event is fired when the user looks at the screen. A <code>B2S REVERSE</code> event is fired when the device goes back to its previous position.</p>
<p>A mounting matrix can be configured with <code>b2s_params.b2s_mounting_matrix</code>. Please refer to the following picture to identify how to set the mounting matrix, depending on the IMU reference frame, so the 'B2S' interrupt is fired when user looks at the screen.</p>
<p><img src="b2s_mmatrix.png" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md63"></a>
Example of output</h2>
<div class="fragment"><div class="line">[I] ###</div>
<div class="line">[I] ### Example EDMP WEARABLE B2S</div>
<div class="line">[I] ###</div>
<div class="line">[I]       1946462 us   B2S</div>
<div class="line">[I]       2977716 us   B2S</div>
<div class="line">[I]      34806104 us   B2S REVERSE</div>
<div class="line">[I]      36035669 us   B2S</div>
<div class="line">[I]      37126366 us   B2S</div>
<div class="line">[I]      37741121 us   B2S REVERSE</div>
<div class="line">[I]      40457867 us   B2S</div>
<div class="line">[I]      41469262 us   B2S REVERSE</div>
<div class="line">[I]      42480618 us   B2S</div>
<div class="line">[I]      43511877 us   B2S</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 25 2024 08:14:38 for DK45686 eMD examples User Guide by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
