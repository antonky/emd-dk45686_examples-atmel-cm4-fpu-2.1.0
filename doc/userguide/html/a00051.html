<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DK45686 eMD examples User Guide: adv_fsync</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="TDK_theme.css" rel="stylesheet" type="text/css"/>
<link href="TDK_override_banner_color.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="TDK_Logo_white.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DK45686 eMD examples User Guide
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">Documentation of the DK45686 eMD examples</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00051.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">adv_fsync </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This application demonstrates how to enable EIS and get tagged gyro data from a FSYNC signal. This signal usually comes from a camera module that will be emulated here for the example. Here, the FSYNC signal is a 30Hz square signal and is connected to the IMU through the FSYNC pin.</p>
<p>It enables gyro in Low-Noise at 200Hz and emulates a camera module FSYNC signal at 30Hz to IMU FSYNC pin, being INT2 reconfigured for FSYNC usage only. Upon INT1 trigger, gyro data and FSYNC tag can be either read from FIFO or from IMU Sensor registers, depending on user request through UART.</p>
<p>Gyro data will be reported with a FSYNC flag being set for the event happening next to the FSYNC rising edge (otherwise, the flag will be 0). The FSYNC delay counter represents the time between the FSYNC rising edge and the sampling.</p>
<p>It enables and configures FIFO to get FSYNC information by default.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Command interface</h1>
<p>This application allows the following command to be sent through UART:</p><ul>
<li><code>f</code>: to get FSYNC flag and FSYNC counter from FIFO (this is the default at startup).</li>
<li><code>r</code>: to get FSYNC flag and FSYNC counter from IMU sensor registers.</li>
<li><code>c</code>: to print current configuration.</li>
<li><code>h</code>: to print help screen.</li>
</ul>
<h1><a class="anchor" id="autotoc_md41"></a>
Terminal output</h1>
<h2><a class="anchor" id="autotoc_md42"></a>
Data format</h2>
<p>Data are printed on the terminal as follow: </p><div class="fragment"><div class="line">&lt;timestamp&gt; us Gyro: &lt;gyr_x&gt; &lt;gyr_y&gt; &lt;gyr_z&gt; dps [FSYNC event &lt;fsync_count&gt;]</div>
</div><!-- fragment --><p>With:</p><ul>
<li><code>&lt;timestamp&gt;</code>: Time in microsecond read from MCU clock when latest INT1 was fired.</li>
<li><code>&lt;gyr_x|y|z&gt;</code>: Raw gyroscope value converted in dps.</li>
<li><code>&lt;fsync_count&gt;</code>: Only if FSYNC signal was detected, time in us between the FSYNC rising edge and the current sampling time.</li>
</ul>
<h2><a class="anchor" id="autotoc_md43"></a>
Example of output</h2>
<div class="fragment"><div class="line">[I] ###</div>
<div class="line">[I] ### Example FSYNC EIS (using advanced API)</div>
<div class="line">[I] ###</div>
<div class="line">[I]      75203 us   Gyro:   -2.01     0.31     0.06 dps</div>
<div class="line">[I]      80166 us   Gyro:   -2.01     0.31     0.06 dps</div>
<div class="line">[I]      85129 us   Gyro:   -1.95     0.24     0.06 dps   FSYNC event 1763</div>
<div class="line">[I]      90091 us   Gyro:   -1.95     0.24     0.06 dps</div>
<div class="line">[I]      95054 us   Gyro:   -1.95     0.18     0.06 dps</div>
<div class="line">[I]     100017 us   Gyro:   -1.95     0.12     0.06 dps</div>
<div class="line">[I]     104979 us   Gyro:   -1.95     0.06     0.00 dps</div>
<div class="line">[I]     109942 us   Gyro:   -1.95     0.06     0.00 dps</div>
<div class="line">[I]     114905 us   Gyro:   -1.95     0.06     0.06 dps</div>
<div class="line">[I]     119867 us   Gyro:   -1.89     0.06     0.06 dps   FSYNC event 3181</div>
<div class="line">[I]     124830 us   Gyro:   -1.95     0.12     0.06 dps</div>
<div class="line">[I]     129793 us   Gyro:   -1.95     0.18     0.00 dps</div>
<div class="line">[I]     134755 us   Gyro:   -1.95     0.18     0.06 dps</div>
<div class="line">[I]     139718 us   Gyro:   -2.01     0.18     0.06 dps</div>
<div class="line">[I]     144681 us   Gyro:   -2.01     0.24     0.06 dps</div>
<div class="line">[I]     149643 us   Gyro:   -1.95     0.18     0.12 dps</div>
<div class="line">[I]     154606 us   Gyro:   -1.95     0.18     0.06 dps   FSYNC event 4597</div>
<div class="line">[I]     159569 us   Gyro:   -1.95     0.18     0.06 dps</div>
<div class="line">[I]     164531 us   Gyro:   -1.95     0.18     0.06 dps</div>
<div class="line">[I]     169494 us   Gyro:   -1.95     0.18     0.00 dps</div>
<div class="line">[I]     174457 us   Gyro:   -1.95     0.18     0.00 dps</div>
<div class="line">[I]     179419 us   Gyro:   -1.95     0.18     0.00 dps</div>
<div class="line">[I]     184382 us   Gyro:   -2.01     0.24     0.06 dps   FSYNC event 1015</div>
<div class="line">[I]     189345 us   Gyro:   -2.01     0.24     0.06 dps</div>
<div class="line">[I]     194307 us   Gyro:   -2.01     0.24     0.12 dps</div>
<div class="line">[I]     199270 us   Gyro:   -1.95     0.31     0.06 dps</div>
<div class="line">[I]     204233 us   Gyro:   -1.95     0.24     0.06 dps</div>
<div class="line">[I]     209195 us   Gyro:   -1.95     0.24     0.12 dps</div>
<div class="line">[I]     214158 us   Gyro:   -1.95     0.18     0.06 dps</div>
<div class="line">[I]     219121 us   Gyro:   -1.95     0.12     0.00 dps   FSYNC event 2432</div>
</div><!-- fragment --><p>We can verify the FSYNC signal frequency (expected to be 30 Hz) based on the last two FSYNC event detected above:</p>
<ul>
<li>fysnc_delta_time = (t1 - delay1) - (t0 - delay0)</li>
<li>fsync_delta_time = (219121 - 2432) - (184382 - 1015)</li>
<li>fysnc_delta_time = 33322 us = 29.999 Hz </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 25 2024 08:14:37 for DK45686 eMD examples User Guide by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
